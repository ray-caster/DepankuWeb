/* Depanku Performance Optimizations - CSS Performance Enhancements */

/* CSS Containment for Better Performance */
.nav-container,
.card,
.modal,
.table-container,
.message-container,
.conversation-list-container,
.profile-card,
.dashboard-section,
.overview-grid,
.board-columns,
.organization-lists {
  contain: layout style paint;
  will-change: transform;
}

/* Hardware Acceleration for Animations */
.nav-brand,
.nav-brand-logo,
.nav-link,
.theme-toggle,
.user-avatar,
.hamburger span,
.mobile-menu,
.mobile-menu-overlay,
.card,
.card::before,
.table tbody tr,
.btn,
.btn::before,
.modal-overlay,
.modal,
.modal-close,
.form-input,
.form-select,
.form-textarea,
.message,
.message-bubble,
.conversation-item,
.conversation-avatar,
.activity-item,
.skill-item,
.profile-tabs,
.tab-button,
.stat-item,
.info-item {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Optimize CSS Selectors */
/* Use class selectors instead of element selectors */
.nav-container,
.card,
.modal,
.btn,
.form-input,
.form-select,
.form-textarea {
  /* Optimized for performance */
}

/* Reduce Repaints */
.nav-container.scrolled,
.card:hover,
.modal-overlay.active,
.mobile-menu.active {
  /* Use transform instead of properties that cause repaints */
  transform: translateY(0);
}

/* CSS Containment Strategy */
.content-visibility: auto;
contain-intrinsic-size: 1000px;

/* Optimize Scrolling */
.conversation-list-container,
.message-container,
.modal-body,
.table-container {
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

/* Reduce Layout Thrashing */
.nav-container,
.card,
.modal,
.btn {
  /* Use transform and opacity for animations */
  transform: translateZ(0);
}

/* Optimize Font Loading */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/inter-regular.woff2') format('woff2'),
       url('/fonts/inter-regular.woff') format('woff');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('/fonts/inter-semibold.woff2') format('woff2'),
       url('/fonts/inter-semibold.woff') format('woff');
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/fonts/inter-bold.woff2') format('woff2'),
       url('/fonts/inter-bold.woff') format('woff');
}

@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/opensans-regular.woff2') format('woff2'),
       url('/fonts/opensans-regular.woff') format('woff');
}

@font-face {
  font-family: 'Poppins';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('/fonts/poppins-semibold.woff2') format('woff2'),
       url('/fonts/poppins-semibold.woff') format('woff');
}

/* Optimize Images */
img {
  content-visibility: auto;
  contain-intrinsic-size: 300px 200px;
}

/* CSS Grid Performance Optimization */
.grid,
.profile-grid,
.overview-grid,
.board-columns,
.organization-lists,
.skills-grid {
  contain: layout;
}

/* Flexbox Performance Optimization */
.flex,
.flex-center,
.flex-between,
.flex-around,
.flex-start,
.flex-end,
.nav-header,
.nav-menu,
.nav-actions,
.mobile-menu-header,
.mobile-menu-nav,
.mobile-menu-actions,
.form-actions,
.card-footer,
.modal-footer,
.profile-stats,
.activity-feed,
.profile-tabs {
  contain: layout style;
}

/* Reduce Paint on Scroll */
.nav-container {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.95);
}

/* Optimize Transitions */
.nav-container,
.card,
.btn,
.modal-overlay,
.mobile-menu,
.mobile-menu-overlay {
  transition: transform 0.3s ease, opacity 0.3s ease;
}

/* Use CSS Variables for Consistent Performance */
:root {
  --transition-fast: 150ms ease;
  --transition-normal: 300ms ease;
  --transition-slow: 500ms ease;
}

/* Optimize Box Shadows */
.shadow-sm,
.shadow-md,
.shadow-lg,
.shadow-xl,
.shadow-2xl {
  contain: strict;
}

/* Reduce Reflows */
.nav-header,
.card-header,
.card-body,
.card-footer,
.modal-header,
.modal-body,
.modal-footer {
  contain: layout style paint;
}

/* Optimize Z-Index Management */
.nav-container {
  z-index: 1000;
}

.mobile-menu-overlay {
  z-index: 999;
}

.mobile-menu {
  z-index: 1001;
}

.modal-overlay {
  z-index: 2000;
}

.modal {
  z-index: 2001;
}

/* CSS Containment for Interactive Elements */
.nav-link,
.btn,
.form-input,
.form-select,
.form-textarea,
.conversation-item,
.mobile-menu-link,
.tab-button,
.skill-item,
.activity-item {
  contain: layout style paint;
  will-change: auto;
}

/* Optimize Animations */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInSent {
  from {
    opacity: 0;
    transform: translateY(20px) translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateX(0);
  }
}

@keyframes slideInReceived {
  from {
    opacity: 0;
    transform: translateY(20px) translateX(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateX(0);
  }
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4);
  }
  70% {
    box-shadow: 0 0 0 6px rgba(220, 53, 69, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
  }
}

@keyframes typing {
  0%, 60%, 100% {
    transform: translateY(0);
    opacity: 0.7;
  }
  30% {
    transform: translateY(-10px);
    opacity: 1;
  }
}

/* Optimize Animation Performance */
.message,
.message.sent,
.message.received,
.conversation-item,
.activity-item,
.skill-item,
.card {
  animation-duration: 0.3s;
  animation-fill-mode: both;
  animation-timing-function: ease;
}

/* Reduce Complexity in Selectors */
/* Avoid universal selectors and descendant selectors */
.nav-container .nav-header {
  /* Use direct child selector */
}

/* Use specific class names */
.nav-brand-logo {
  /* More specific than .nav-brand img */
}

/* Optimize Media Queries */
@media (max-width: 768px) {
  .nav-menu,
  .nav-actions {
    display: none;
  }
  
  .hamburger {
    display: flex;
  }
}

@media (max-width: 480px) {
  .profile-grid {
    grid-template-columns: 1fr;
  }
  
  .form-row {
    grid-template-columns: 1fr;
  }
}

/* CSS Containment for Print Media */
@media print {
  .nav-container,
  .mobile-menu,
  .modal-overlay,
  .btn,
  .hamburger {
    display: none;
  }
  
  .card,
  .modal,
  .table-container {
    contain: layout style;
  }
}

/* Optimize for Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .nav-container,
  .card,
  .btn,
  .modal-overlay,
  .mobile-menu,
  .mobile-menu-overlay {
    transition: none;
  }
}

/* Optimize for High Performance Devices */
@media (min-width: 1200px) {
  .grid,
  .profile-grid,
  .overview-grid {
    contain: layout style paint;
  }
}

/* CSS Containment for Dark Mode */
@media (prefers-color-scheme: dark) {
  .nav-container,
  .card,
  .modal,
  .table-container {
    contain: layout style paint;
  }
}

/* Optimize for Touch Devices */
@media (hover: none) and (pointer: coarse) {
  .nav-link,
  .btn,
  .conversation-item,
  .mobile-menu-link,
  .tab-button,
  .skill-item,
  .activity-item {
    touch-action: manipulation;
  }
}

/* CSS Containment for High Contrast Mode */
@media (prefers-contrast: high) {
  .nav-container,
  .card,
  .modal,
  .table-container {
    contain: layout style paint;
  }
}

/* Optimize for Prefers-Reduced-Data */
@media (prefers-reduced-data: reduce) {
  .card::before,
  .btn::before,
  .nav-brand::before,
  .message-bubble::before {
    display: none;
  }
  
  .background-pattern {
    display: none;
  }
}

/* CSS Containment for Screen Readers */
@media (screen-reader: on) {
  .nav-container,
  .card,
  .modal,
  .table-container {
    contain: layout style paint;
  }
}

/* Optimize for Print */
@media print {
  .nav-container,
  .mobile-menu,
  .modal-overlay,
  .btn,
  .hamburger {
    display: none;
  }
  
  .card,
  .modal,
  .table-container {
    contain: layout style;
    box-shadow: none;
    border: 1px solid #ccc;
  }
}

/* Performance Monitoring */
/* Add performance monitoring classes */
.performance-monitor {
  contain: layout style paint;
}

.performance-monitor::before {
  content: '';
  display: block;
  width: 1px;
  height: 1px;
  background: transparent;
}

/* Optimize CSS Loading */
/* Critical CSS above the fold */
<head>
  <style>
    /* Critical CSS for navigation */
    .nav-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .nav-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .hamburger {
      display: none;
    }
    
    @media (max-width: 768px) {
      .hamburger {
        display: flex;
      }
    }
  </style>
</head>

/* Non-critical CSS can be loaded asynchronously */
<link rel="preload" href="/static/css/framework.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/static/css/components.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="/static/css/navigation.css" as="style" onload="this.onload=null;this.rel='stylesheet'">

/* Optimize Font Loading */
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Open+Sans:wght@400&family=Poppins:wght@600&display=swap" rel="stylesheet">

/* Optimize Image Loading */
<img src="image.jpg" loading="lazy" alt="Description">

/* Optimize Video Loading */
<video controls preload="metadata">
  <source src="video.mp4" type="video/mp4">
</video>

/* Optimize iframes */
<iframe src="iframe.html" loading="lazy" title="Description"></iframe>

/* Performance Metrics */
/* Add performance monitoring */
<script>
  if ('PerformanceObserver' in window) {
    const observer = new PerformanceObserver((list) => {
      for (const entry of list.getEntries()) {
        console.log('Performance entry:', entry);
      }
    });
    
    observer.observe({ entryTypes: ['paint', 'layout-shift', 'largest-contentful-paint'] });
  }
</script>